---
layout: default
---
<style>
    canvas {
        position: absolute;
        top: 0;
        left: 0;
        background-color: #111;
    }
    </style>    
<script language="javascript" type="text/javascript" src="https://cdn.staticfile.org/jquery/1.7.2/jquery.min.js"></script>
<div class="page clearfix" index>
    <div class="left">
        <h1>Welcome to ZGS's Blog!</h1>
        <small>挖坑小能手在线挖坑(〃'▽'〃)</small>
        <hr>
        <ul>
            {% for post in paginator.posts %}
              <li>
                <h2>
                  <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>{{ post.date | date: "%F" }}
                    </div>
                    <div class="label-card">
                        {% if post.author %}<i class="fa fa-user"></i>{{ post.author }}
                        {% endif %}
                    </div>
                    <div class="label-card">
                        {% if page.meta %}<i class="fa fa-key"></i>{{ page.meta }}  {% endif %}
                    </div>

                    <div class="label-card">
                    {% include category.html %}
                    </div>

                    <div class="label-card">
                    {% include tag.html %}
                    </div>
                </div>
                <div class="excerpt">
                    {{post.excerpt}}
                </div>
                <div class="read-all">
                    <a  href="{{ post.url | prepend: site.baseurl }}"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            {% endfor %}
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          {% if paginator.previous_page %}
            <a href="/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="{{ paginator.previous_page_path | prepend: site.baseurl }}" class="previous"><i class="fa fa-angle-left"></i></a>
          {% else %}
            <span class="previous disable"><i class="fa fa-angle-double-left"></i></span>
            <span class="previous disable"><i class="fa fa-angle-left"></i></span>
          {% endif %}
          <span class="page_number ">{{ paginator.page }}/{{ paginator.total_pages }}</span>
          {% if paginator.next_page %}
            <a href="{{ paginator.next_page_path }}" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="{{ site.baseurl }}/page{{ paginator.total_pages }}" class="next"><i class="fa fa-angle-double-right"></i></a>
          {% else %}
            <span class="next disable"><i class="fa fa-angle-right"></i></span>
            <span class="next disable"><i class="fa fa-angle-double-right"></i></span>
          {% endif %}
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    {% for post in site.posts offset: 0 limit: 10  %}
                        <li><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    {% for category in site.categories %}
                    <li>
                        <a href="{{ root_url }}/{{ site.category_dir }}#{{ category | first }}" class="categories-list-item" cate="{{ category | first }}">
                            <span class="name">
                                {{ category | first }}
                            </span>
                            <span class="badge">{{ category | last | size }}</span>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    {% assign first = site.tags.first %}
                    {% assign max = first[1].size %}
                    {% assign min = max %}
                    {% for tag in site.tags offset:1 %}
                      {% if tag[1].size > max %}
                        {% assign max = tag[1].size %}
                      {% elsif tag[1].size < min %}
                        {% assign min = tag[1].size %}
                      {% endif %}
                    {% endfor %}

                    {% if max == min %}
                        {% assign diff = 1 %}
                    {% else %}
                        {% assign diff = max | minus: min %}
                    {% endif %}

                    {% for tag in site.tags %}
                      {% assign temp = tag[1].size | minus: min | times: 36 | divided_by: diff %}
                      {% assign base = temp | divided_by: 4 %}
                      {% assign remain = temp | modulo: 4 %}
                      {% if remain == 0 %}
                        {% assign size = base | plus: 9 %}
                      {% elsif remain == 1 or remain == 2 %}
                        {% assign size = base | plus: 9 | append: '.5' %}
                      {% else %}
                        {% assign size = base | plus: 10 %}
                      {% endif %}
                      {% if remain == 0 or remain == 1 %}
                        {% assign color = 9 | minus: base %}
                      {% else %}
                        {% assign color = 8 | minus: base %}
                      {% endif %}
                      <a href="{{ root_url }}/{{ site.tag_dir }}#{{ tag[0] }}" style="font-size: {{ size }}pt; color: #{{ color }}{{ color }}{{ color }};">{{ tag[0] }}</a>
                    {% endfor %}
                </div>
            </div>

            <!-- <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul  class="content-ul">

                </ul>
            </div> -->
        </div>
    </div>
</div>
<!-- <script src="{{ "/js/scroll.min.js " | prepend: site.baseurl }}" charset="utf-8"></script> -->
<!-- <script src="{{ "/js/pageContent.js " | prepend: site.baseurl }}" charset="utf-8"></script> -->
<!-- <script type="text/javascript">
    $(document).ready(function(){
        var a_index = 0;
        $("body").click(function(e){
            var a = new Array("富强", "民主", "文明", "和谐", "自由", "平等", "公正" ,"法治", "爱国", "敬业", "诚信", "友善");
            var $i = $("<span/>").text(a[a_index]);
            a_index = (a_index + 1) % a.length;
            var x = e.pageX,y = e.pageY;
            $i.css({
                "z-index": 99999,
                "top": y - 20,
                "left": x,
                "position": "absolute",
                "font-weight": "bold",
                "color": "#ff6651"
            });
            $("body").append($i);
            $i.animate({"top": y-180,"opacity": 0},1500,function() {
                $i.remove();
            });
        });
    });
    </script> -->
    <canvas id=c></canvas><script>
        var gl = c.getContext( 'webgl', { preserveDrawingBuffer: true } )
            ,	w = c.width = window.innerWidth
            ,	h = c.height = window.innerHeight
        
            ,	webgl = {}
            ,	opts = {
                projectileAlpha: .8,
                projectileLineWidth: 1.3,
                fireworkAngleSpan: .5,
                baseFireworkVel: 3,
                addedFireworkVel: 3,
                gravity: .03,
                lowVelBoundary: -.2,
                xFriction: .995,
                baseShardVel: 1,
                addedShardVel: .2,
                fireworks: 100,
                baseShardsParFirework: 10,
                addedShardsParFirework: 10,
                shardFireworkVelMultiplier: .3,
                initHueMultiplier: 1/360,
                runHueAdder: .1/360
            }
        
        webgl.vertexShaderSource = `
        uniform int u_mode;
        uniform vec2 u_res;
        attribute vec4 a_data;
        varying vec4 v_color;
        
        vec3 h2rgb( float h ){
            return clamp( abs( mod( h * 6. + vec3( 0, 4, 2 ), 6. ) - 3. ) -1., 0., 1. );
        }
        void clear(){
            gl_Position = vec4( a_data.xy, 0, 1 );
            v_color = vec4( 0, 0, 0, a_data.w );
        }
        void draw(){
            gl_Position = vec4( vec2( 1, -1 ) * ( ( a_data.xy / u_res ) * 2. - 1. ), 0, 1 );
            v_color = vec4( h2rgb( a_data.z ), a_data.w );
        }
        void main(){
            if( u_mode == 0 )
                draw();
            else
                clear();
        }
        `;
        webgl.fragmentShaderSource = `
        precision mediump float;
        varying vec4 v_color;
        
        void main(){
            gl_FragColor = v_color;
        }
        `;
        
        webgl.vertexShader = gl.createShader( gl.VERTEX_SHADER );
        gl.shaderSource( webgl.vertexShader, webgl.vertexShaderSource );
        gl.compileShader( webgl.vertexShader );
        
        webgl.fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );
        gl.shaderSource( webgl.fragmentShader, webgl.fragmentShaderSource );
        gl.compileShader( webgl.fragmentShader );
        
        webgl.shaderProgram = gl.createProgram();
        gl.attachShader( webgl.shaderProgram, webgl.vertexShader );
        gl.attachShader( webgl.shaderProgram, webgl.fragmentShader );
        
        gl.linkProgram( webgl.shaderProgram );
        gl.useProgram( webgl.shaderProgram );
        
        webgl.dataAttribLoc = gl.getAttribLocation( webgl.shaderProgram, 'a_data' );
        webgl.dataBuffer = gl.createBuffer();
        
        gl.enableVertexAttribArray( webgl.dataAttribLoc );
        gl.bindBuffer( gl.ARRAY_BUFFER, webgl.dataBuffer );
        gl.vertexAttribPointer( webgl.dataAttribLoc, 4, gl.FLOAT, false, 0, 0 );
        
        webgl.resUniformLoc = gl.getUniformLocation( webgl.shaderProgram, 'u_res' );
        webgl.modeUniformLoc = gl.getUniformLocation( webgl.shaderProgram, 'u_mode' );
        
        gl.viewport( 0, 0, w, h );
        gl.uniform2f( webgl.resUniformLoc, w, h );
        
        gl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );
        gl.enable( gl.BLEND );
        
        gl.lineWidth( opts.projectileLineWidth );
        
        webgl.data = [];
        
        webgl.clear = function(){
            
            gl.uniform1i( webgl.modeUniformLoc, 1 );
            var a = .1;
            webgl.data = [
                -1, -1, 0, a,
                 1, -1, 0, a,
                -1,  1, 0, a,
                -1,  1, 0, a,
                 1, -1, 0, a,
                 1,  1, 0, a
            ];
            webgl.draw( gl.TRIANGLES );
            gl.uniform1i( webgl.modeUniformLoc, 0 );
            webgl.data.length = 0;
        }
        webgl.draw = function( glType ){
            
            gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( webgl.data ), gl.STATIC_DRAW );
            gl.drawArrays( glType, 0, webgl.data.length / 4 );
        }
        
        var	fireworks = []
            ,	tick = 0
            ,	sins = []
            ,	coss = []
            ,	maxShardsParFirework = opts.baseShardsParFirework + opts.addedShardsParFirework
            ,	tau = 6.283185307179586476925286766559;
        
        for( var i = 0; i < maxShardsParFirework; ++i ){
            sins[ i ] = Math.sin( tau * i / maxShardsParFirework );
            coss[ i ] = Math.cos( tau * i / maxShardsParFirework );
        }
        
        function Firework(){
            this.reset();
            this.shards = [];
            for( var i = 0; i < maxShardsParFirework; ++i )
                this.shards.push( new Shard( this ) );
        }
        Firework.prototype.reset = function(){
            
            var angle = -Math.PI / 2 + ( Math.random() - .5 )* opts.fireworkAngleSpan
                ,	vel = opts.baseFireworkVel + opts.addedFireworkVel * Math.random();
            
            this.mode = 0;
            this.vx = vel * Math.cos( angle );
            this.vy = vel * Math.sin( angle );
            
            this.x = Math.random() * w;
            this.y = h;
            
            this.hue = tick * opts.initHueMultiplier;
            
        }
        Firework.prototype.step = function(){
            
            if( this.mode === 0 ){
                
                var ph = this.hue
                    ,	px = this.x
                    ,	py = this.y;
                
                this.hue += opts.runHueAdder;
            
                this.x += this.vx *= opts.xFriction;
                this.y += this.vy += opts.gravity;
                
                webgl.data.push(
                    px, py, ph, opts.projectileAlpha * .2,
                    this.x, this.y, this.hue, opts.projectileAlpha * .2 );
                
                if( this.vy >= opts.lowVelBoundary ){
                    this.mode = 1;
        
                    this.shardAmount = opts.baseShardsParFirework + opts.addedShardsParFirework * Math.random() | 0;
        
                    var baseAngle = Math.random() * tau
                        ,	x = Math.cos( baseAngle )
                        ,	y = Math.sin( baseAngle )
                        ,	sin = sins[ this.shardAmount ]
                        ,	cos = coss[ this.shardAmount ];
        
                    for( var i = 0; i < this.shardAmount; ++i ){
        
                        var vel = opts.baseShardVel + opts.addedShardVel * Math.random();
                        this.shards[ i ].reset( x * vel, y * vel )
                        var X = x;
                        x = x * cos - y * sin;
                        y = y * cos + X * sin;
                    }
                }
        
            } else if( this.mode === 1 ) {
                
                this.ph = this.hue
                this.hue += opts.runHueAdder;
                
                var allDead = true;
                for( var i = 0; i < this.shardAmount; ++i ){
                    var shard = this.shards[ i ];
                    if( !shard.dead ){
                        shard.step();
                        allDead = false;
                    }
                }
                
                if( allDead )
                    this.reset();
            }
            
        }
        function Shard( parent ){
            this.parent = parent;
        }
        Shard.prototype.reset = function( vx, vy ){
            this.x = this.parent.x;
            this.y = this.parent.y;
            this.vx = this.parent.vx * opts.shardFireworkVelMultiplier + vx;
            this.vy = this.parent.vy * opts.shardFireworkVelMultiplier + vy;
            this.starty = this.y;
            this.dead = false;
            this.tick = 1;
        }
        Shard.prototype.step = function(){
            
            this.tick += .05;
            
            var px = this.x
                ,	py = this.y;
            
            this.x += this.vx *= opts.xFriction;
            this.y += this.vy += opts.gravity;
            
            var proportion = 1 - ( this.y - this.starty ) / ( h - this.starty );
            
            webgl.data.push(
                px, py, this.parent.ph, opts.projectileAlpha / this.tick,
                this.x, this.y, this.parent.hue, opts.projectileAlpha / this.tick );
            
            if( this.y > h )
                this.dead = true;
        }
        
        function anim(){
            
            window.requestAnimationFrame( anim )
            
            webgl.clear();
            
            ++tick;
            
            if( fireworks.length < opts.fireworks )
                fireworks.push( new Firework );
            
            fireworks.map( function( firework ){ firework.step(); } );
            
            webgl.draw( gl.LINES );
        }
        anim();
        
        window.addEventListener( 'resize', function(){
            
            w = c.width = window.innerWidth;
            h = c.height = window.innerHeight;
            
            gl.viewport( 0, 0, w, h );
            gl.uniform2f( webgl.resUniformLoc, w, h );
        })
        window.addEventListener( 'click', function( e ){
            var firework = new Firework();
            firework.x = e.clientX;
            firework.y = e.clientY;
            firework.vx = 0;
            firework.vy = 0;
            fireworks.push( firework );
        });
        </script>